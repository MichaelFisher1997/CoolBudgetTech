{"time":"2025-08-02T03:45:58.544703673+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.loadProviders","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/config/provider.go","line":99},"msg":"Using cached provider data","path":"/home/micqdf/.local/share/crush/providers.json"}
{"time":"2025-08-02T03:45:58.545680447+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.loadProviders.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/config/provider.go","line":103},"msg":"Updating provider cache in background"}
{"time":"2025-08-02T03:45:58.960034846+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.saveProvidersInCache","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/config/provider.go","line":48},"msg":"Saving cached provider data","path":"/home/micqdf/.local/share/crush/providers.json"}
{"time":"2025-08-02T03:45:59.074475591+01:00","level":"INFO","msg":"OK   20250424200609_initial.sql (818.74µs)"}
{"time":"2025-08-02T03:45:59.074808122+01:00","level":"INFO","msg":"OK   20250515105448_add_summary_message_id.sql (305.94µs)"}
{"time":"2025-08-02T03:45:59.07504954+01:00","level":"INFO","msg":"OK   20250624000000_add_created_at_indexes.sql (228.51µs)"}
{"time":"2025-08-02T03:45:59.075327087+01:00","level":"INFO","msg":"OK   20250627000000_add_provider_to_messages.sql (264.38µs)"}
{"time":"2025-08-02T03:45:59.075331084+01:00","level":"INFO","msg":"goose: successfully migrated database to version: 20250627000000"}
{"time":"2025-08-02T03:45:59.075358787+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).initLSPClients","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":18},"msg":"LSP clients initialization started in background"}
{"time":"2025-08-02T03:45:59.075398032+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":23},"msg":"Creating LSP client","name":"go","command":"gopls","args":null}
{"time":"2025-08-02T03:45:59.075438068+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":23},"msg":"Creating LSP client","name":"nix","command":"nil","args":null}
{"time":"2025-08-02T03:45:59.075447115+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":23},"msg":"Creating LSP client","name":"typescript","command":"typescript-language-server","args":["--stdio"]}
{"time":"2025-08-02T03:45:59.075606587+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":28},"msg":"Failed to create LSP client for","go":"failed to start LSP server: exec: \"gopls\": executable file not found in $PATH"}
{"time":"2025-08-02T03:45:59.075652174+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":28},"msg":"Failed to create LSP client for","nix":"failed to start LSP server: exec: \"nil\": executable file not found in $PATH"}
{"time":"2025-08-02T03:45:59.075653356+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":28},"msg":"Failed to create LSP client for","typescript":"failed to start LSP server: exec: \"typescript-language-server\": executable file not found in $PATH"}
{"time":"2025-08-02T03:45:59.077393619+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":171},"msg":"Initializing agent tools","agent":"task"}
{"time":"2025-08-02T03:45:59.07931741+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":171},"msg":"Initializing agent tools","agent":"coder"}
{"time":"2025-08-02T03:45:59.438566921+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":173},"msg":"Initialized agent tools","agent":"task"}
{"time":"2025-08-02T03:45:59.438586268+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":173},"msg":"Initialized agent tools","agent":"coder"}
{"time":"2025-08-02T03:46:00.404983029+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":171},"msg":"Initializing agent tools","agent":"task"}
{"time":"2025-08-02T03:46:00.405030069+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":173},"msg":"Initialized agent tools","agent":"task"}
{"time":"2025-08-02T03:46:00.406752708+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":171},"msg":"Initializing agent tools","agent":"coder"}
{"time":"2025-08-02T03:46:00.406812531+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":173},"msg":"Initialized agent tools","agent":"coder"}
{"time":"2025-08-02T03:46:04.937511672+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":623},"msg":"Tool call started","toolCall":{"id":"call_AD9UkXkuTpyuH9vVkjGT2g","name":"ls","input":"","type":"","finished":false}}
{"time":"2025-08-02T03:46:08.087120843+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":623},"msg":"Tool call started","toolCall":{"id":"call_RdWnGZsYSbKO4k3hYFpbEg","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-02T03:46:11.223136003+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).shouldRetry","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":528},"msg":"OpenAI API error","error":"received error while streaming: {\"message\":\"ConnectionError: {\\\"object\\\":\\\"error\\\",\\\"message\\\":\\\"Internal server error: 'str object' has no attribute 'items'\\\",\\\"type\\\":\\\"InternalServerError\\\",\\\"param\\\":null,\\\"code\\\":500}\",\"code\":502,\"metadata\":{\"raw\":{\"error_type\":\"validation_error\",\"error_message\":\"ConnectionError: {\\\"object\\\":\\\"error\\\",\\\"message\\\":\\\"Internal server error: 'str object' has no attribute 'items'\\\",\\\"type\\\":\\\"InternalServerError\\\",\\\"param\\\":null,\\\"code\\\":500}\"},\"provider_name\":\"DeepInfra\"}}"}
{"time":"2025-08-02T03:46:11.223166451+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).stream.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":472},"msg":"Retrying due to rate limit","attempt":1,"max_retries":8}
{"time":"2025-08-02T03:46:15.07775037+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).shouldRetry","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":528},"msg":"OpenAI API error","error":"received error while streaming: {\"message\":\"ConnectionError: {\\\"object\\\":\\\"error\\\",\\\"message\\\":\\\"Internal server error: 'str object' has no attribute 'items'\\\",\\\"type\\\":\\\"InternalServerError\\\",\\\"param\\\":null,\\\"code\\\":500}\",\"code\":502,\"metadata\":{\"raw\":{\"error_type\":\"validation_error\",\"error_message\":\"ConnectionError: {\\\"object\\\":\\\"error\\\",\\\"message\\\":\\\"Internal server error: 'str object' has no attribute 'items'\\\",\\\"type\\\":\\\"InternalServerError\\\",\\\"param\\\":null,\\\"code\\\":500}\"},\"provider_name\":\"DeepInfra\"}}"}
{"time":"2025-08-02T03:46:15.077773003+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).stream.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":472},"msg":"Retrying due to rate limit","attempt":2,"max_retries":8}
{"time":"2025-08-02T03:46:21.507753107+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).shouldRetry","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":528},"msg":"OpenAI API error","error":"received error while streaming: {\"message\":\"ConnectionError: {\\\"object\\\":\\\"error\\\",\\\"message\\\":\\\"Internal server error: 'str object' has no attribute 'items'\\\",\\\"type\\\":\\\"InternalServerError\\\",\\\"param\\\":null,\\\"code\\\":500}\",\"code\":502,\"metadata\":{\"raw\":{\"error_type\":\"validation_error\",\"error_message\":\"ConnectionError: {\\\"object\\\":\\\"error\\\",\\\"message\\\":\\\"Internal server error: 'str object' has no attribute 'items'\\\",\\\"type\\\":\\\"InternalServerError\\\",\\\"param\\\":null,\\\"code\\\":500}\"},\"provider_name\":\"DeepInfra\"}}"}
{"time":"2025-08-02T03:46:21.507780379+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).stream.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":472},"msg":"Retrying due to rate limit","attempt":3,"max_retries":8}
{"time":"2025-08-02T03:46:21.551628945+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).Cancel","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":237},"msg":"Request cancellation initiated","session_id":"2ed6b97b-1c13-4f5b-a4ab-229bc7382f2b"}
{"time":"2025-08-02T03:46:22.638225958+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.loadProviders","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/config/provider.go","line":99},"msg":"Using cached provider data","path":"/home/micqdf/.local/share/crush/providers.json"}
{"time":"2025-08-02T03:46:22.638848609+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.loadProviders.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/config/provider.go","line":103},"msg":"Updating provider cache in background"}
{"time":"2025-08-02T03:46:22.893791613+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.saveProvidersInCache","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/config/provider.go","line":48},"msg":"Saving cached provider data","path":"/home/micqdf/.local/share/crush/providers.json"}
{"time":"2025-08-02T03:46:23.159141917+01:00","level":"INFO","msg":"goose: no migrations to run. current version: 20250627000000"}
{"time":"2025-08-02T03:46:23.159186201+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).initLSPClients","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":18},"msg":"LSP clients initialization started in background"}
{"time":"2025-08-02T03:46:23.159202702+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":23},"msg":"Creating LSP client","name":"typescript","command":"typescript-language-server","args":["--stdio"]}
{"time":"2025-08-02T03:46:23.159255202+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":23},"msg":"Creating LSP client","name":"go","command":"gopls","args":null}
{"time":"2025-08-02T03:46:23.159335444+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":23},"msg":"Creating LSP client","name":"nix","command":"nil","args":null}
{"time":"2025-08-02T03:46:23.159358508+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":28},"msg":"Failed to create LSP client for","typescript":"failed to start LSP server: exec: \"typescript-language-server\": executable file not found in $PATH"}
{"time":"2025-08-02T03:46:23.159406819+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":28},"msg":"Failed to create LSP client for","go":"failed to start LSP server: exec: \"gopls\": executable file not found in $PATH"}
{"time":"2025-08-02T03:46:23.159464719+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).createAndStartLSPClient","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/app/lsp.go","line":28},"msg":"Failed to create LSP client for","nix":"failed to start LSP server: exec: \"nil\": executable file not found in $PATH"}
{"time":"2025-08-02T03:46:23.161146311+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":171},"msg":"Initializing agent tools","agent":"task"}
{"time":"2025-08-02T03:46:23.163056175+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":171},"msg":"Initializing agent tools","agent":"coder"}
{"time":"2025-08-02T03:46:23.335946699+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":173},"msg":"Initialized agent tools","agent":"task"}
{"time":"2025-08-02T03:46:23.335972628+01:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":173},"msg":"Initialized agent tools","agent":"coder"}
{"time":"2025-08-02T03:46:42.167273777+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).Run.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":343},"msg":"failed to process events: POST \"https://openrouter.ai/api/v1/chat/completions\": 400 Bad Request {\"message\":\"Provider returned error\",\"code\":400,\"metadata\":{\"raw\":\"ERROR\",\"provider_name\":\"Stealth\"}}"}
{"time":"2025-08-02T03:48:15.54259145+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).convertMessages","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":152},"msg":"There is a message without content, investigate, this should not happen"}
{"time":"2025-08-02T03:48:16.117180558+01:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).Run.func1","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/agent/agent.go","line":343},"msg":"failed to process events: POST \"https://openrouter.ai/api/v1/chat/completions\": 400 Bad Request {\"message\":\"Provider returned error\",\"code\":400,\"metadata\":{\"raw\":\"ERROR\",\"provider_name\":\"Stealth\"}}"}
{"time":"2025-08-02T03:48:46.591197801+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).convertMessages","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":152},"msg":"There is a message without content, investigate, this should not happen"}
{"time":"2025-08-02T03:48:46.591224732+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).convertMessages","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":152},"msg":"There is a message without content, investigate, this should not happen"}
{"time":"2025-08-02T03:48:49.933730734+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).convertMessages","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":152},"msg":"There is a message without content, investigate, this should not happen"}
{"time":"2025-08-02T03:48:49.933754279+01:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).convertMessages","file":"/home/micqdf/go/pkg/mod/github.com/charmbracelet/crush@v0.1.10/internal/llm/provider/openai.go","line":152},"msg":"There is a message without content, investigate, this should not happen"}
